<%= form_tag toggle_public_recipe_path(@recipe), method: :post do %>
  <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
  <%= submit_tag @recipe.public ? 'Make private' : 'Make public' %>
<% end %>

<% if @recipe.public? || @recipe.user == current_user %>
  <h2><%= @recipe.name %></h2>
  <p>Preparation Time: <%= @recipe.preparation_time %> minutes</p>
  <p>Cooking Time: <%= @recipe.cooking_time %> minutes</p>
  <p>Description: <%= @recipe.description %></p>
  <h3>Foods:</h3>

  <hr>

  <%= render 'recipefood', foods: @recipe.foods %>
<% else %>
  <p>This recipe is private.</p>
<% end %>

<% if @recipe.user == current_user %>
  <%= link_to 'Add Food', new_recipe_food_path(recipe_id: @recipe.id) %>
<% end %>

<% if @recipe.user == current_user %>
            <%= link_to "Edit", edit_recipe_path(@recipe), class:'btn btn-secondary' %>
            <%= button_to "Delete", recipe_path(@recipe), method: :delete, data: { confirm: "Are you sure you want to delete this recipe?" }, class: "btn btn-danger" %>
          <% end %>
<%= link_to "Back to recipes", recipes_path, class:'btn btn-secondary' %>
